<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Resume Chat Test</title>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
  <h2>Resume Chat Test</h2>

  <label>Sender ID:</label>
  <input id="senderId" placeholder="Paste your user ID here" /><br><br>

  <label>Request ID:</label>
  <input id="requestId" value="68209f3f6ec1a3a4b40b9b0c" /><br><br>

  <label>Message:</label>
  <input id="messageInput" placeholder="Type your message..." />
  <button id="sendBtn">Send</button>

  <h3>Messages:</h3>
  <ul id="chat"></ul>

  <script>
    const socket = io("http://localhost:5000"); // or your deployed URL

    document.getElementById('sendBtn').onclick = () => {
      const requestId = document.getElementById('requestId').value.trim();
      const senderId = document.getElementById('senderId').value.trim();
      const message = document.getElementById('messageInput').value.trim();

      if (!requestId || !senderId || !message) return alert("Fill all fields");

      socket.emit("sendMessage", { requestId, senderId, message });
    };

    socket.on("connect", () => {
      const requestId = document.getElementById('requestId').value.trim();
      socket.emit("joinRequestRoom", requestId);
      console.log("ğŸ”— Connected and joined room", requestId);
    });

    socket.on("receiveMessage", (data) => {
      const li = document.createElement("li");
      li.textContent = `[${data.senderId}]: ${data.message}`;
      document.getElementById("chat").appendChild(li);
    });
  </script>
</body>
</html>
